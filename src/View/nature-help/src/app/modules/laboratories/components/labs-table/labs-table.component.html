<mat-expansion-panel class="filter-panel">
  <mat-expansion-panel-header class="filter-header">
    <mat-panel-title
      i18n="@@filterTitle"
      class="filter-title"
      >Filter</mat-panel-title
    >
  </mat-expansion-panel-header>

  <form
    [formGroup]="filterForm"
    (ngSubmit)="applyFilter()"
    class="filter-form">
    <div class="form-row">
      <mat-form-field class="form-field">
        <mat-label>Latitude</mat-label>
        <input
          matInput
          formControlName="latitude"
          type="number"
          step="0.000001" />
      </mat-form-field>

      <mat-form-field class="form-field">
        <mat-label>Longitude</mat-label>
        <input
          matInput
          formControlName="longitude"
          type="number"
          step="0.000001" />
      </mat-form-field>
    </div>

    <div class="action-buttons">
      <button
        i18n="@@applyBtn"
        mat-raised-button
        color="primary"
        type="submit"
        class="apply-button">
        Apply
      </button>
      <button
        i18n="@@clearBtn"
        mat-raised-button
        color="warn"
        type="button"
        (click)="filterForm.reset()"
        class="reset-button">
        Clear
      </button>
    </div>
  </form>
</mat-expansion-panel>

<div class="header">
  <h2 i18n="@@laboratories">Laboratories</h2>
  <input
    type="search"
    class="input-like"
    placeholder="Search..."
    i18n-placeholder="@@searchPlaceholder"
    [(ngModel)]="search" />
  <button
    (click)="navigateToDetail()"
    class="btn-like"
    id="add-btn">
    <i class="material-icons">add</i>
  </button>
</div>

<div class="grid-container">
  <div class="grid-header">
    <div
      i18n="@@title"
      i18n-matTooltip="@@title"
      matTooltip="Title">
      Title
    </div>
    <div
      i18n="@@location"
      i18n-matTooltip="@@location"
      matTooltip="Location">
      Location
    </div>
    <div
      i18n="@@researchers"
      i18n-matTooltip="@@researchers"
      matTooltip="Researchers">
      Researchers
    </div>
    <div
      i18n="@@researchesNumber"
      i18n-matTooltip="@@researchesNumber"
      matTooltip="Researches number">
      Researchers number
    </div>
    <div matTooltip="Map">Map</div>
    <div matTooltip="Edit">Edit</div>
  </div>
  <div
    class="grid-body"
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="500"
    [infiniteScrollDisabled]="scrollCheckDisabled"
    (scrolled)="onScroll()">
    <div
      *ngFor="let lab of labsAPIService.labs$ | async"
      class="grid-row">
      <div>{{ lab.title }}</div>
      <div>{{ lab.latitude }}, {{ lab.longitude }}</div>
      <div>{{ lab.researchersCount ? (lab.researchers | labResearchers) : "â€”" }}</div>
      <div>{{ lab.researchersCount }}</div>
      <div class="btn-ceil">
        <button
          mat-icon-button
          color="primary"
          (click)="changeMapFocus(lab.latitude, lab.longitude)"
          matTooltip="Location">
          <mat-icon>my_location</mat-icon>
        </button>
      </div>
      <div class="btn-ceil">
        <button
          (click)="navigateToDetail(lab.id)"
          class="btn-like"
          id="edit-btn">
          <i class="fa fa-edit"></i>
        </button>
      </div>
    </div>
  </div>
</div>
