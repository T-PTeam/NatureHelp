<div class="password-reset-container">
  <div class="password-reset-card">
    <h2
      class="reset-title"
      i18n="@@resetPasswordTitle">
      Reset Password
    </h2>
    <div class="reset-content">
      <form
        [formGroup]="formGroup"
        (ngSubmit)="onSubmit()">
        <mat-form-field class="full-width">
          <mat-label i18n="@@newPasswordLabel">New Password</mat-label>
          <input
            matInput
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="newPassword" />
          <button
            mat-icon-button
            matSuffix
            (click)="hidePassword = !hidePassword"
            type="button">
            <mat-icon>{{ hidePassword ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
          <mat-error
            i18n="@@newPasswordError"
            *ngIf="formGroup.get('newPassword')?.invalid && formGroup.get('newPassword')?.touched">
            Password must be at least 6 characters
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label i18n="@@confirmPasswordLabel">Confirm Password</mat-label>
          <input
            matInput
            [type]="hideConfirmPassword ? 'password' : 'text'"
            formControlName="confirmPassword" />
          <button
            mat-icon-button
            matSuffix
            (click)="hideConfirmPassword = !hideConfirmPassword"
            type="button">
            <mat-icon>{{ hideConfirmPassword ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
          <mat-error
            i18n="@@confirmPasswordError"
            *ngIf="formGroup.get('confirmPassword')?.invalid && formGroup.get('confirmPassword')?.touched">
            <span *ngIf="formGroup.get('confirmPassword')?.errors?.['required']"> Please confirm your password </span>
            <span *ngIf="formGroup.get('confirmPassword')?.errors?.['passwordMismatch']"> Passwords do not match </span>
          </mat-error>
        </mat-form-field>

        <div class="form-actions">
          <button
            i18n="@@cancelBtn"
            class="reset-button"
            mat-raised-button
            (click)="goBack()">
            Cancel
          </button>
          <button
            i18n="@@resetPasswordBtn"
            class="apply-button"
            mat-flat-button
            color="primary"
            type="submit"
            [disabled]="formGroup.invalid || isLoading">
            <mat-spinner
              *ngIf="isLoading"
              diameter="20"></mat-spinner>
            <span *ngIf="!isLoading">Reset Password</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
